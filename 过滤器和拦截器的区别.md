# 过滤器filter和拦截器interceptor的区别

之前看过一篇博客有这么一句话：

**过滤器是取你所想，拦截器是拒你所不想**

但其实两者都可以理解为起过滤的作用。

具体区别而言，总结有如下几点:

|方面|filter|interceptor|
|--|--|--|
| 实现原理|基于函数回调|java反射，动态代理|
|是否依赖servlet|java原生，依赖servlet|spring框架所有，不依赖servlet|
|作用范围|所有的url，可以配置|无法配置url，只是针对实现某接口的类的方法在其前后进行处理，这也正是动态代理的逻辑|
|是否可以自动注入context中的bean|不能，但可以通过getBean方法获得|可以|
|如何选择|在纯Java的应用中尽量选择filter，减小第三方|在spring应用中官方推荐interceptor|
---

执行顺序： 过滤器 -> 拦截器 -> aop -> 业务逻辑 -> 拦截器的post方法 -> filter的destroy

使用场景:
1. 日志记录：记录请求信息的日志，以便进行信息监控、信息统计、计算PV（Page View）等。

2. 权限检查：如登录检测，进入处理器检测检测是否登录，如果没有直接返回到登录页面；

3. 性能监控：有时候系统在某段时间莫名其妙的慢，可以通过拦截器在进入处理器之前记录开始时间，在处理完后记录结束时间，从而得到该请求的处理时间（如果有反向代理，如apache可以自动记录）；

4. 通用行为：读取cookie得到用户信息并将用户对象放入请求，从而方便后续流程使用，还有如提取Locale、Theme信息等，只要是多个处理器都需要的即可使用拦截器实现。

5. OpenSessionInView：如hibernate，在进入处理器打开Session，在完成后关闭Session。


